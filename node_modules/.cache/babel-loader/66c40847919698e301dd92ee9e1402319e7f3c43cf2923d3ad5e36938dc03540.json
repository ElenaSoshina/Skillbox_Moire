{"ast":null,"code":"/*eslint-disable*/\nimport ProductList from '@/components/Product/ProductList.vue';\nimport ProductFilter from '@/components/Product/ProductFilter.vue';\nimport BasePagination from '@/components/Base/BasePagination.vue';\nimport BaseLayout from '@/layouts/BaseLayout.vue';\nimport { mapGetters, mapState, mapActions } from 'vuex';\nexport default {\n  components: {\n    BasePagination,\n    ProductList,\n    ProductFilter,\n    BaseLayout\n  },\n  data() {\n    return {\n      filterPriceFrom: 0,\n      filterPriceTo: 0,\n      filterCategoryId: 0,\n      filterColorIds: [],\n      filterMaterialIds: [],\n      filterSeasonIds: [],\n      page: 1,\n      productsPerPage: '12',\n      productsLoading: false\n    };\n  },\n  computed: {\n    ...mapState('products', ['productLoadingFailed', 'open', 'productError', 'productErrorMessage']),\n    ...mapGetters('products', ['products', 'countProducts'])\n  },\n  watch: {\n    page: 'loadProducts',\n    productsPerPage: 'loadProducts',\n    filterCategoryId: 'loadProducts',\n    filterPriceFrom: 'loadProducts',\n    filterPriceTo: 'loadProducts',\n    filterColorIds: 'loadProducts',\n    filterMaterialIds: 'loadProducts',\n    filterSeasonIds: 'loadProducts'\n  },\n  created() {\n    this.loadProducts();\n  },\n  methods: {\n    ...mapActions('products', ['loadProductsData', 'closeModal', 'openModal']),\n    loadProducts() {\n      this.productsLoading = true;\n      clearTimeout(this.loadProductsTimer);\n      this.loadProductsTimer = setTimeout(() => {\n        this.loadProductsData({\n          page: this.page,\n          limit: this.productsPerPage,\n          minPrice: this.filterPriceFrom,\n          maxPrice: this.filterPriceTo,\n          categoryId: this.filterCategoryId,\n          colorIds: this.filterColorIds,\n          materialIds: this.filterMaterialIds,\n          seasonIds: this.filterSeasonIds\n        }).then(() => this.productsLoading = false);\n      }, 300);\n    }\n  }\n};","map":{"version":3,"names":["ProductList","ProductFilter","BasePagination","BaseLayout","mapGetters","mapState","mapActions","components","data","filterPriceFrom","filterPriceTo","filterCategoryId","filterColorIds","filterMaterialIds","filterSeasonIds","page","productsPerPage","productsLoading","computed","watch","created","loadProducts","methods","clearTimeout","loadProductsTimer","setTimeout","loadProductsData","limit","minPrice","maxPrice","categoryId","colorIds","materialIds","seasonIds","then"],"sources":["src/pages/MainPage.vue"],"sourcesContent":["<template>\n  <!-- eslint-disable  -->\n  <BaseLayout>\n    <main class=\"content container\">\n      <div class=\"content__top\">\n\n        <div class=\"content__row\">\n          <h1 class=\"content__title\">\n            Каталог\n          </h1>\n          <!-- Меняем кол-во товаров на странице -->\n          <span class=\"content__info\"> Кол-во товаров: {{ countProducts }} </span>\n          <span class=\"content__info\">\n            Показывать:\n            <label>\n              <select type=\"text\" name=\"productsPerPage\" v-model=\"productsPerPage\">\n                <option value=\"12\">12</option>\n                <option value=\"24\">24</option>\n                <option value=\"32\">32</option>\n              </select>\n            </label>\n          </span>\n        </div>\n      </div>\n\n      <div class=\"content__catalog\">\n\n        <!-- Фильтрация товаров -->\n        <ProductFilter :price-from.sync=\"filterPriceFrom\" :price-to.sync=\"filterPriceTo\"\n          :category-id.sync=\"filterCategoryId\" :color-ids.sync=\"filterColorIds\" :material-ids.sync=\"filterMaterialIds\"\n          :season-ids.sync=\"filterSeasonIds\" />\n\n        <section class=\"catalog\">\n          <!-- Список товаров -->\n          <ProductList :products=\"products\" />\n\n          <svg v-if=\"productsLoading\" class=\"spinner\" viewBox=\"0 0 50 50\">\n            <circle class=\"path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\" stroke-width=\"5\"></circle>\n          </svg>\n\n          <!-- Пагинация -->\n          <BasePagination v-model=\"page\" :count=\"countProducts\" :per-page=\"productsPerPage\" />\n\n          <!-- Модальное окно -->\n          <vue-modaltor :visible=\"open\" @hide=\"closeModal\" :show-close-button=\"false\">\n            <div v-if=\"productsLoading\" class=\"cart__error form__error-block\" style=\"text-align:center;\">\n              <h4 v-if=\"productLoadingFailed\">Ошибка при загрузке!</h4>\n              <p v-if=\"productErrorMessage\">\n                {{ productErrorMessage }}\n              </p>\n            </div>\n          </vue-modaltor>\n        </section>\n      </div>\n    </main>\n  </BaseLayout>\n</template>\n\n<script>\n/*eslint-disable*/\nimport ProductList from '@/components/Product/ProductList.vue';\nimport ProductFilter from '@/components/Product/ProductFilter.vue';\nimport BasePagination from '@/components/Base/BasePagination.vue';\nimport BaseLayout from '@/layouts/BaseLayout.vue';\nimport { mapGetters, mapState, mapActions } from 'vuex';\n\nexport default {\n  components: { BasePagination, ProductList, ProductFilter, BaseLayout },\n  data() {\n    return {\n      filterPriceFrom: 0,\n      filterPriceTo: 0,\n      filterCategoryId: 0,\n      filterColorIds: [],\n      filterMaterialIds: [],\n      filterSeasonIds: [],\n      page: 1,\n      productsPerPage: '12',\n\n      productsLoading: false,\n    };\n  },\n  computed: {\n    ...mapState('products', [\n      'productLoadingFailed',\n      'open',\n      'productError',\n      'productErrorMessage',\n    ]),\n    ...mapGetters('products', [\n      'products',\n      'countProducts',\n    ]),\n  },\n  watch: {\n    page: 'loadProducts',\n    productsPerPage: 'loadProducts',\n    filterCategoryId: 'loadProducts',\n    filterPriceFrom: 'loadProducts',\n    filterPriceTo: 'loadProducts',\n    filterColorIds: 'loadProducts',\n    filterMaterialIds: 'loadProducts',\n    filterSeasonIds: 'loadProducts',\n  },\n  created() {\n    this.loadProducts();\n  },\n  methods: {\n    ...mapActions('products', [\n      'loadProductsData',\n      'closeModal',\n      'openModal',\n    ]),\n    loadProducts() {\n      this.productsLoading = true;\n      clearTimeout(this.loadProductsTimer);\n      this.loadProductsTimer = setTimeout(() => {\n        this.loadProductsData({\n          page: this.page,\n          limit: this.productsPerPage,\n          minPrice: this.filterPriceFrom,\n          maxPrice: this.filterPriceTo,\n          categoryId: this.filterCategoryId,\n          colorIds: this.filterColorIds,\n          materialIds: this.filterMaterialIds,\n          seasonIds: this.filterSeasonIds,\n        })\n          .then(() => this.productsLoading = false);\n      }, 300);\n    },\n  },\n};\n</script>\n"],"mappings":"AA2DA;AACA,OAAAA,WAAA;AACA,OAAAC,aAAA;AACA,OAAAC,cAAA;AACA,OAAAC,UAAA;AACA,SAAAC,UAAA,EAAAC,QAAA,EAAAC,UAAA;AAEA;EACAC,UAAA;IAAAL,cAAA;IAAAF,WAAA;IAAAC,aAAA;IAAAE;EAAA;EACAK,KAAA;IACA;MACAC,eAAA;MACAC,aAAA;MACAC,gBAAA;MACAC,cAAA;MACAC,iBAAA;MACAC,eAAA;MACAC,IAAA;MACAC,eAAA;MAEAC,eAAA;IACA;EACA;EACAC,QAAA;IACA,GAAAb,QAAA,cACA,wBACA,QACA,gBACA,sBACA;IACA,GAAAD,UAAA,cACA,YACA,gBACA;EACA;EACAe,KAAA;IACAJ,IAAA;IACAC,eAAA;IACAL,gBAAA;IACAF,eAAA;IACAC,aAAA;IACAE,cAAA;IACAC,iBAAA;IACAC,eAAA;EACA;EACAM,QAAA;IACA,KAAAC,YAAA;EACA;EACAC,OAAA;IACA,GAAAhB,UAAA,cACA,oBACA,cACA,YACA;IACAe,aAAA;MACA,KAAAJ,eAAA;MACAM,YAAA,MAAAC,iBAAA;MACA,KAAAA,iBAAA,GAAAC,UAAA;QACA,KAAAC,gBAAA;UACAX,IAAA,OAAAA,IAAA;UACAY,KAAA,OAAAX,eAAA;UACAY,QAAA,OAAAnB,eAAA;UACAoB,QAAA,OAAAnB,aAAA;UACAoB,UAAA,OAAAnB,gBAAA;UACAoB,QAAA,OAAAnB,cAAA;UACAoB,WAAA,OAAAnB,iBAAA;UACAoB,SAAA,OAAAnB;QACA,GACAoB,IAAA,YAAAjB,eAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}